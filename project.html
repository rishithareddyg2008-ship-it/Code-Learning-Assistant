<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Code Learning Assistant</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; background-color: lightgrey; }
        textarea { width: 100%; height: 150px; font-family: monospace; font-size: 1rem; }
        select, button { margin-top: 1rem; padding: 0.5rem; font-size: 1rem; }
        #output { margin-top: 1rem; white-space: pre-wrap; background: #f0f0f0; padding: 1rem; }
    </style>
</head>
<body>
    <h1>AI-Powered Code Learning Assistant</h1>
    
    <h2>Enter Python code to analyze:</h2>
    <textarea id="codeInput" placeholder="Write your Python code here..."></textarea>
    <button onclick="analyzeCode()">Analyze Code</button>
    
    <div id="output"></div>
    
    <h2>Get Programming Exercise</h2>
    <select id="levelSelect">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
    <button onclick="getExercise()">Generate Exercise</button>
    
    <div id="exerciseOutput" style="margin-top:1rem; font-weight: bold;"></div>
    
    <script>
        async function analyzeCode() {
            const code = document.getElementById('codeInput').value;
            const response = await fetch('/analyze', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({code})
            });
            const result = await response.json();
            if(result.status === 'success'){
                document.getElementById('output').textContent = result.message;
            } else {
                document.getElementById('output').textContent = `Error: ${result.message}\nSuggestion: ${result.suggestion}`;
            }
        }
        
        async function getExercise() {
            const level = document.getElementById('levelSelect').value;
            const response = await fetch('/exercise', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({level})
            });
            const result = await response.json();
            document.getElementById('exerciseOutput').textContent = result.exercise;
        }
    </script>
</body>
</html>
